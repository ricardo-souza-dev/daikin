<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"/>
<meta name="Viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="default"/>

<title>Optional Function Setup</title>

<link rel="stylesheet" href="../jqm/jquery.mobile-1.4.2.css">
<link rel="stylesheet" href="../css/custom.css">

<style>
</style>
<script src="../jquery/jquery-2.1.3.min.js"></script>
<script src="../jqm/jquery.mobile-1.4.2.js"></script>
<script src="../script/CommModule.js"></script>
<script src="../script/GlobalVal.js"></script>
<script src="../script/service.js"></script>

<script>
$(document).on("pagebeforeshow", "#option-setup-page", function(e,data) {
	try {
		$.ajax({
			type: "POST",
			url: "/server/get_option.rb",
			async: false,
			dataType: "json",
			success: function(data,textStatus,jqXHR) {
				// PPD
				if(data['ppd_enable']) $('#option-setup-page #ppd-enable').val('true');
				else $('#option-setup-page #ppd-enable').val('false');
				$('#option-setup-page #ppd-enable').slider('refresh');
				// Data Management
				if(data['data']) $('#option-setup-page #data-enable').val('true');
				else $('#option-setup-page #data-enable').val('false');
				$('#option-setup-page #data-enable').slider('refresh');
				// BEI rating
				if(data['bei']) $('#option-setup-page #bei-enable').val('true');
				else $('#option-setup-page #bei-enable').val('false');
				$('#option-setup-page #bei-enable').slider('refresh');
				// msm connection
				if(data['msm']) $('#option-setup-page #msm-enable').val('true');
				else $('#option-setup-page #msm-enable').val('false');
				$('#option-setup-page #msm-enable').slider('refresh');
				// hotel connection
				if(data['hotel']) $('#option-setup-page #hotel-enable').val('true');
				else $('#option-setup-page #hotel-enable').val('false');
				$('#option-setup-page #hotel-enable').slider('refresh');
			}
		});
	} catch(e) {
		alert(e);
	}
});

$(document).on("click", "#option-save", function(e) {
	try {
		var ppd = false
		if($('#option-setup-page #ppd-enable').val() == 'true') ppd = true;
		var msm = false
		if($('#option-setup-page #msm-enable').val() == 'true') msm = true;
		var dbman = false
		if($('#option-setup-page #data-enable').val() == 'true') dbman = true;
		var bei = false
		if($('#option-setup-page #bei-enable').val() == 'true') bei = true;
		var hotel = false
		if($('#option-setup-page #hotel-enable').val() == 'true') hotel = true;
		$.ajax({
			type: "POST",
			url: "/server/set_option.rb",
			async: false,
			data: {ppd_enable:ppd,msm:msm,data:dbman,bei:bei,hotel:hotel},
			success: function(data, textStatus, jqXHR) {
				alert(data);
			}
		});
	} catch(e) {
		alert(e);
	}
});

</script>

</head>
<body>
	<div data-role="page" id="option-setup-page">
		<div data-role="header" data-id="comm-header" data-position="fixed" data-tap-toggle="false" class='header'>
			<img class="header-logo" src="../image/logo.png">
			<h1 class="page-header-title">Optional Function Setting</h1>
		</div>

		<div data-role="content" class="contents-area">
			<h4 class='item-title'>PPD function</h4>
			<select id='ppd-enable' data-role='slider'>
				<option value='false'>Disable</option>
				<option value='true'>Enable</option>
			</select>
		</div>

		<div data-role="content" class="contents-area">
			<h4 class='item-title'>Data Management</h4>
			<select id='data-enable' data-role='slider'>
				<option value='false'>Disable</option>
				<option value='true'>Enable</option>
			</select>
		</div>

		<div data-role="content" class="contents-area">
			<h4 class='item-title'>BEI rating</h4>
			<select id='bei-enable' data-role='slider'>
				<option value='false'>Disable</option>
				<option value='true'>Enable</option>
			</select>
		</div>

		<div data-role="content" class="contents-area">
			<h4 class='item-title'>MSM Connection</h4>
			<select id='msm-enable' data-role='slider'>
				<option value='false'>Disable</option>
				<option value='true'>Enable</option>
			</select>
		</div>

		<div data-role="content" class="contents-area">
			<h4 class='item-title'>Hotel Guest Room Management</h4>
			<select id='hotel-enable' data-role='slider'>
				<option value='false'>Disable</option>
				<option value='true'>Enable</option>
			</select>
		</div>

		<div data-role="footer" data-id="comm-footer" data-position="fixed" class="footer" data-tap-toggle="false">
			<div data-role="navbar">
				<ul>
					<li><a href="#" data-icon="edit" data-iconpos="top" id="option-save" data-transition="slide" data-direction="reverse">Set</a></li>
				</ul>
			</div>
	</div>
</body>
</html>
